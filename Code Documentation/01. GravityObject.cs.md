# GravityObject.cs
*This class is attached to every game object on which gravity works*

## Variables
* Mass - mass of the object (1 unit ~ 10^9 kg);
* Radius - radius of the object, size of the object depends on that;
* Controller - global attachment GravityObjectsController (works kinda like gravity manager);
* _rigidbody2D - Rigidbody2D, attached to game object;
* listHolder - list of every gravity object script, updated via [controller](https://github.com/mmarusiak/Universe-Simulator/blob/main/Code%20Documentation/01.%20GravityObject.cs.md#void-updateprivatelist);
* InitialVelocity - velocity at the start of simulation;
* GConstantValue - physical constant value, but multiplied by 10^9 *(that's why our unit of mass is equal to 10^9 kg)*;
* currentGravityForceVector - vector of all forces that act on the object in single frame;

## void Start
At start we set up scale of our game object with radius. Also we set up controller and rigidbody. Than we call AddGravityObject on controller. Then we setup mass and velocity to our rigidbody by values provided by user.

## void Update
We loop each GravityObject in the list holder and then calculate and apply the gravity for main gravity force vector.
When all forces are added to main gravity force vector, we add main gravity vector to rigidbody as impulse force. Then we erase main gravity force vector *(for new frame all forces will be diffrent)*.

## void ApplyAndCalculateForce
*arguments: float distance, float mass, Vector2 vectorDist*

![image](https://user-images.githubusercontent.com/20907620/208295006-93237df9-627f-4a33-af25-4e572104affc.png)

Force value is magnitude of the gravity force vector, calculated by formula above. VectorDist is x and y values of distance, by this values distance is calculated via pytagoras.

**Gravity force vector direction is the same as distance direction.
Because of that we can build two trianagles, where one of the sides is Gravity Force and distance**:

![image](https://user-images.githubusercontent.com/20907620/208296631-b8c1afff-ff0d-4d74-a00f-c121fcaf366e.png)





``GravityForce = proportionScale * distance``

Because of similarity of both triangles by proportion scale we can calculate xGravityForce and yGravityForce.

``xGravityForce = proportionScale * vectorDist.x => xGravityForce = GravityForce/distance * vectorDist.x``

``yGravityForce = proportionScale * vectorDist.y => yGravityForce = GravityForce/distance * vectorDist.y``

When xForceValue and yForceValue is calcualted we add them to main gravity force vector as new vector of x and y values.

## void UpdatePrivateList
*called by [controller](https://github.com/mmarusiak/Universe-Simulator/blob/main/Code%20Documentation/02.%20GravityObjectsController.cs.md#void-addgravityobject) when new gravity object is created (added to "global") list*

Just getting list of gravity objects (expect of self gravity object) from controller (via [GetObjects method](https://github.com/mmarusiak/Universe-Simulator/blob/main/Code%20Documentation/02.%20GravityObjectsController.cs.md#void-getobjects)).

## Vector2 AddVectors
*called by [ApplyAndCalculate function](https://github.com/mmarusiak/Universe-Simulator/blob/main/Code%20Documentation/01.%20GravityObject.cs.md#void-applyandcalculateforce)*
*arguments: Vector2 a (that's base vector), Vector2 b*

We simply return added vectors by formula below:
``newVector = new Vector2(baseVector.x + vectorToAdd.x, baseVector.y + vectorToAdd.y)``


[*-> GravityObjectsController.cs*](./02.%20GravityObjectsController.cs.md)